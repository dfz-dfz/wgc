<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Access-Control-Allow-Origin" content="*">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=8"/>
<title>升级VIP-微工程</title>
<meta name="description" content="微工程，微工程APP，装修、材料、家具、饰品一站式服务，让装修更简单，价格更透明！！" />
<meta name="keywords" content="微工程，微工程，家居商城，微工程家居商城，微工程家居装修商城，办公室装修，写字楼装修，材料，装修材料，家居，办公家具，家居，家具，装修，装饰" />
<style type="text/css">
	label {
		color: red;
	}
	.body {
		background-color: #edefee;
	}
	.main {
		width: 1100px;
		height: auto;
		overflow: hidden;
		margin: 0 auto;
		color:#000;
	}
	.section {
		background-color: #fff;
		margin: 20px;
		padding: 10px;
		min-height: 300px;
		height: auto;
		overflow: hidden;
	}
	.box {
		border:1px solid #afafaf;
		background-color:#edefee;
		text-align: left;
		font-size: 16px;
	}
	.box input[type="radio"] {
		display: inline-block;
		cursor: pointer;
	}
	.active {
		background-color: red;
		color: #fff;
	}
	.none {
		background-color: #fff;
		color: #000;	
	}
	#serverListPage ul {
		list-style: none;
		padding: 0;
		margin: 0;
	}
	#serverListPage ul li {
		float: left;
		text-align: center;
	}
	.main_box {
		text-align: left;
		font-size: 16px;
		height: auto;
		overflow: hidden;
	}
</style>
</head>
<body>
{include file=header.html}
<div class="body">
	<div class="main">
		<div class="section">
			<div class="title_mune" style="line-height: 30px;text-align: left;margin-left: 10px;font-size: 18px;color:#000;margin-bottom: 10px;">
				<span class="mune_btn active" id="toVip" style="cursor: pointer;margin-right: 10px;">升级VIP</span>
				<div style="height: 12px;width:1px;border-right: 1px dashed #000;display: inline-block;"></div>
				<span class="mune_btn" id="serverList" style="cursor: pointer;margin-left: 12px;">消费记录</span>
			</div>
			<div class="main_box">
				<!-- 升级vip -->
				<div id="toVipPage" style="height: auto;overflow: hidden;">
					<div class="box" style="line-height: 30px;padding:0 10px;">
						<span style="margin-right: 10px;">您当前的会员级别:</span>
						<span>普通用户</span>
					</div>
					<div class="box" style="height: 55px;padding:10px;">
						<div style="margin-bottom: 10px;">
							<span id="name" style="margin-right: 20px;"></span>
							<span>您将购买<span id="cycle" style="color:blue;"></span>会员</span>
							<span><a href="index.php?app=search&act=vip" style="color: #969494">(重选)</a></span>
						</div>
						<div>应付金额：<span id="money" style="color: red;"></span><span>/年</span></div>
					</div>
					<!-- 支付方式 -->
					<div style="line-height: 30px;position: relative;font-weight: bold;">
						<div id="weixin_btn" style="padding:0 10px;border:1px solid red;display: inline-block;width: 100px;text-align: center;border-bottom: none;border-top-left-radius: 6px;border-top-right-radius: 6px;cursor: pointer;">微信支付</div>
						<div style="display: inline-block;width: 4px;border-bottom: 1px solid red;position: absolute;top: 30px;left: 122px;"></div>
						<div id="zhifubao_btn" style="padding:0 10px;border:1px solid red;display: inline-block;width: 100px;text-align: center;border-bottom: none;border-top-left-radius: 6px;border-top-right-radius: 6px;cursor: pointer;background-color: red;color: #fff;">支付宝</div>
						<div style="display: inline-block;width: 792px;border-bottom: 1px solid red;position: absolute;top: 30px;left: 248px;"></div>
					</div>
					<div style="min-height: 300px;border:1px solid red;border-top: none;height: auto;overflow: hidden;">
						<!-- 微信支付 -->
						<div id="weixin_box" style="min-height: 300px;height: auto;overflow: hidden;">
							<div style="margin-left: 20px;line-height: 50px;">直接通过手机微信扫描，即可自动完成支付。</div>
							<div id="erweima" style="text-align: center;margin-top: 80px;margin-bottom: 20px;">
								<div id="scewm_btn" style="display: inline-block;background-color: red;color: #fff;padding: 6px 16px;border-radius: 4px;cursor: pointer;" onclick="toWeixinPay()">生成二维码</div>

								<div id="qrcode" style="width:100px; height:100px; margin:20px auto;display: none;"></div>

							</div>
							<div style="margin-left: 20px;line-height: 25px;font-weight: bold;">温馨提示：</div>
							<div style="margin-left: 20px;line-height: 25px;">1.点击“生成二维码”生成二维码</div>
							<div style="margin-left: 20px;line-height: 25px;">2.用手机微信扫描，完成支付后自动升级到VIP会员</div>
						</div>
						<!-- 支付宝支付 -->
						<div id="zhifubao_box" style="display: none;height: 300px;">
							<div style="margin-left: 20px;line-height: 50px;">如果您有支付宝账号，可以通过支付宝在线支付。</div>
							<div style="text-align: center;margin-top: 80px;margin-bottom: 20px;">
								<div style="display: inline-block;background-color: red;color: #fff;padding: 6px 16px;border-radius: 4px;cursor: pointer;" onclick="tozhifubao()">前往支付宝支付</div>
							</div>
							<div style="margin-left: 20px;line-height: 25px;font-weight: bold;">温馨提示：</div>
							<div style="margin-left: 20px;line-height: 25px;">1.支付宝购买完支付后自动升级到VIP会员</div>
						</div>
					</div>
				</div>

				<!-- 消费记录 -->
				<div id="serverListPage" style="display: none;border:1px solid #afafaf;background-color:#edefee;height: 300px;">
					<ul style="font-size: 16px;font-weight: bold;height:36px;line-height: 36px;border-bottom: 1px solid #999;">
						<li style="width: 15%;border-right:1px solid #999;">日期</li>
						<li style="width: 20%;border-right:1px solid #999;">时间</li>
						<li style="width: 34.5%;border-right:1px solid #999;">订单号</li>
						<li style="width: 15%;border-right:1px solid #999;">金额</li>
						<li style="width: 15%;">消费类型</li>
					</ul>
					<!-- <ul style="font-size: 14px;height:36px;line-height: 36px;border-bottom: 1px solid #999;">
						<li style="width: 15%;">2018-9-28</li>
						<li style="width: 20%;">16:06</li>
						<li style="width: 34.5%;">salkdfjlaskdfsd</li>
						<li style="width: 15%;">100</li>
						<li style="width: 15%;">充值</li>
					</ul> -->
				</div>
			</div>
		</div>
	</div>
</div>

{include file=footer.html}

<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://static.runoob.com/assets/qrcode/qrcode.min.js"></script>
<script type="text/javascript">
	var url = 'http://wgcapp.59jiaju.com/';
	$('#erweima').append('<input id="text" type="hidden" value="改功能尚未完善" style="width:10%;margin:0 auto;" />')
	$('#text').val('获取支付订单数据超时');
	$(function(){
		getMessage();
	});

	$('.title_mune span').click(function () {
	    var f = this;
	    $('.title_mune span').each(function () {
	    	this.className = this == f ? 'active' : 'none';
	    });
	});

	$('#toVip').click(function() {
		$('#toVipPage').css('display', 'block');
		$('#serverListPage').css('display', 'none');
	});
	$('#serverList').click(function() {
		$('#toVipPage').css('display', 'none');
		$('#serverListPage').css('display', 'block');
	});

	$('#weixin_btn').click(function() {
		$('#zhifubao_btn').css('background-color', 'red');
		$('#zhifubao_btn').css('color', '#fff');
		$('#weixin_btn').css('background-color', '#fff');
		$('#weixin_btn').css('color', '#000');
		$('#weixin_box').css('display', 'block');
		$('#zhifubao_box').css('display', 'none');
	});

	$('#zhifubao_btn').click(function() {
		$('#weixin_btn').css('background-color', 'red');
		$('#weixin_btn').css('color', '#fff');
		$('#zhifubao_btn').css('background-color', '#fff');
		$('#zhifubao_btn').css('color', '#000');
		$('#zhifubao_box').css('display', 'block');
		$('#weixin_box').css('display', 'none');
	});

	function getMessage(){
		$.post(url+'index.php/Home/user/getVip', {
			user_id : <?php echo $_SESSION["user_info"]["user_id"];?>,
			type : 'vip'
		}, function(ret) {
			if(ret.code == 200){
				var data = ret.message,
					addtime = data.addtime,
					cycle = data.cycle,
					id = data.id,
					money = data.money,
					username = data.username;

				if(cycle == 1680){
					cycle = '招聘用户';
				}else if(cycle == 1980){
					cycle = '企业专属版';
				}else if(cycle == 15980){
					cycle = '企业至尊版';
				}else if(cycle == 19980){
					cycle = '企业砖石版';
				}

				$('#name').html(username+',您好!');
				$('#cycle').html(cycle);
				$('#money').html(money+'元');
			}
		},'json');
	}

	// 生成微信支付二维码
	function toWeixinPay(){
		$('#erweima').css('margin-top','0');
		$('#scewm_btn').hide();
		$('#qrcode').show();
		// var html = '';
		// html += '<div style="text-align:center;">';
		// 	html += '<input id="text" type="hidden" value="该功能尚未完善" style="width:80%" /><br />';
		// 	// html += '<div id="qrcode" style="width:100px; height:100px; margin-top:15px;"></div>';
		// 	html += '<div style="margin-top:20px;font-size:14px;">请用微信扫描进入支付页面</div>';
		// html += '</div>';
		// $('#erweima').append(html);
	}

	function tozhifubao(){
		window.location.href = 'https://www.alipay.com/';
	}

	var qrcode = new QRCode(document.getElementById("qrcode"), {
		width : 100,
		height : 100
	});

	function makeCode () {		
		var elText = document.getElementById("text");
		if (!elText.value) {
			elText.focus();
			return;
		}
		qrcode.makeCode(elText.value);
	}

	makeCode();

	$("#text").on("blur", function () {
		makeCode();
	}).on("keydown", function (e) {
		if (e.keyCode == 13) {
			makeCode();
		}
	});
</script>
</body>
</html>